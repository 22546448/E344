Version 4
SHEET 1 3560 1988
WIRE 288 -1152 288 -1168
WIRE 288 -1040 288 -1072
WIRE 560 -1040 288 -1040
WIRE 1152 -1040 560 -1040
WIRE -592 -1024 -720 -1024
WIRE -448 -1024 -448 -1136
WIRE -448 -1024 -592 -1024
WIRE -320 -1024 -448 -1024
WIRE -192 -1024 -320 -1024
WIRE -720 -992 -720 -1024
WIRE -592 -992 -592 -1024
WIRE -448 -992 -448 -1024
WIRE -320 -992 -320 -1024
WIRE -192 -992 -192 -1024
WIRE 448 -992 400 -992
WIRE 560 -992 560 -1040
WIRE 448 -912 448 -992
WIRE 448 -912 400 -912
WIRE 512 -912 448 -912
WIRE 560 -896 544 -896
WIRE -720 -880 -720 -912
WIRE -592 -880 -592 -912
WIRE -448 -880 -448 -912
WIRE -320 -880 -320 -912
WIRE -192 -880 -192 -912
WIRE 1536 -864 1472 -864
WIRE 1632 -864 1616 -864
WIRE 1472 -848 1472 -864
WIRE -720 -768 -720 -816
WIRE -592 -768 -592 -816
WIRE -592 -768 -720 -768
WIRE -448 -768 -448 -816
WIRE -448 -768 -592 -768
WIRE -320 -768 -320 -816
WIRE -320 -768 -448 -768
WIRE -192 -768 -192 -816
WIRE -192 -768 -320 -768
WIRE -448 -736 -448 -768
WIRE -496 -656 -768 -656
WIRE -1072 -624 -1072 -672
WIRE 1536 -624 1472 -624
WIRE 1632 -624 1616 -624
WIRE 1472 -608 1472 -624
WIRE -448 -592 -448 -640
WIRE -1072 -512 -1072 -544
WIRE -496 -512 -1072 -512
WIRE -1072 -448 -1072 -512
WIRE 448 -416 448 -432
WIRE 448 -416 336 -416
WIRE 592 -416 448 -416
WIRE 448 -400 448 -416
WIRE 800 -400 656 -400
WIRE 880 -400 800 -400
WIRE 1552 -400 1488 -400
WIRE 1648 -400 1632 -400
WIRE 592 -384 560 -384
WIRE 1488 -384 1488 -400
WIRE -1120 -368 -1312 -368
WIRE 560 -288 560 -384
WIRE 560 -288 336 -288
WIRE 608 -288 560 -288
WIRE 800 -288 800 -400
WIRE 800 -288 736 -288
WIRE 560 -208 560 -288
WIRE 1536 -192 1472 -192
WIRE 1632 -192 1616 -192
WIRE 1472 -176 1472 -192
WIRE 1536 48 1472 48
WIRE 1632 48 1616 48
WIRE 1472 64 1472 48
WIRE -240 160 -624 160
WIRE -944 320 -944 304
WIRE -544 320 -944 320
WIRE -400 336 -400 208
WIRE -400 336 -480 336
WIRE -224 336 -400 336
WIRE -944 352 -944 320
WIRE -736 352 -736 304
WIRE -624 352 -624 160
WIRE -624 352 -736 352
WIRE -544 352 -624 352
WIRE -736 384 -736 352
FLAG 1648 -400 7.2V
IOPIN 1648 -400 Out
FLAG 1488 -304 0
FLAG 1632 -624 5V
IOPIN 1632 -624 Out
FLAG 1472 -528 0
FLAG -448 -496 0
FLAG -1072 -352 0
FLAG -1072 -672 SR
IOPIN -1072 -672 In
FLAG -1312 -368 LS
IOPIN -1312 -368 In
FLAG -448 -1136 7.2V
IOPIN -448 -1136 In
FLAG -768 -656 PWM
IOPIN -768 -656 In
FLAG 288 -1168 5V
IOPIN 288 -1168 In
FLAG 336 -992 SR
IOPIN 336 -992 In
FLAG 336 -912 LS
IOPIN 336 -912 In
FLAG 272 -288 SET
IOPIN 272 -288 In
FLAG 272 -416 RESET
IOPIN 272 -416 In
FLAG 560 -128 0
FLAG 448 -320 0
FLAG 448 -512 5V
IOPIN 448 -512 In
FLAG 624 -432 5V
IOPIN 624 -432 In
FLAG 624 -368 0
FLAG 880 -400 SR
IOPIN 880 -400 Out
FLAG 1632 -192 SET
IOPIN 1632 -192 Out
FLAG 1472 -96 0
FLAG 1632 48 RESET
IOPIN 1632 48 Out
FLAG 1472 144 0
FLAG -944 224 5V
IOPIN -944 224 In
FLAG -512 368 0
FLAG -944 432 0
FLAG -512 304 5V
IOPIN -512 304 In
FLAG -736 224 5V
IOPIN -736 224 In
FLAG -736 464 0
FLAG -224 336 LS
IOPIN -224 336 Out
FLAG -240 160 LSToADC
IOPIN -240 160 Out
FLAG 1632 -864 PWM
IOPIN 1632 -864 Out
FLAG 1472 -768 0
FLAG 1152 -1040 Pilot
IOPIN 1152 -1040 Out
FLAG 560 -896 0
SYMBOL voltage 1488 -400 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V10
SYMATTR Value 7.2
SYMBOL res 1536 -416 M90
WINDOW 0 -7 47 VBottom 2
WINDOW 3 29 54 VTop 2
SYMATTR InstName RSense2
SYMATTR Value 1µ
SYMBOL voltage 1472 -624 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V11
SYMATTR Value 5
SYMBOL res 1520 -640 M90
WINDOW 0 -7 47 VBottom 2
WINDOW 3 29 54 VTop 2
SYMATTR InstName RSense3
SYMATTR Value 1µ
SYMBOL nmos -496 -592 R0
SYMATTR InstName M6
SYMATTR Value 2N7002
SYMBOL nmos -496 -736 R0
SYMATTR InstName M7
SYMATTR Value 2N7002
SYMBOL nmos -1120 -448 R0
SYMATTR InstName M8
SYMATTR Value 2N7002
SYMBOL res -1056 -528 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R26
SYMATTR Value 10k
SYMBOL res -704 -896 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R28
SYMATTR Value 200
SYMBOL LED -736 -880 R0
SYMATTR InstName D2
SYMBOL res -576 -896 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R29
SYMATTR Value 200
SYMBOL LED -608 -880 R0
SYMATTR InstName D3
SYMBOL res -432 -896 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R30
SYMATTR Value 200
SYMBOL LED -464 -880 R0
SYMATTR InstName D4
SYMBOL res -304 -896 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R31
SYMATTR Value 200
SYMBOL LED -336 -880 R0
SYMATTR InstName D5
SYMBOL res -176 -896 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R32
SYMATTR Value 200
SYMBOL LED -208 -880 R0
SYMATTR InstName D6
SYMBOL nmos 512 -992 R0
WINDOW 3 69 63 Left 2
SYMATTR Value 2N7002
SYMATTR InstName M10
SYMBOL res 272 -1168 R0
SYMATTR InstName R33
SYMATTR Value 10k
SYMBOL OpAmps\\LTC6079 624 -400 R0
SYMATTR InstName U4
SYMBOL res 576 -112 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R19
SYMATTR Value 10k
SYMBOL res 464 -304 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R20
SYMATTR Value 10k
SYMBOL res 464 -416 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R21
SYMATTR Value 10k
SYMBOL voltage 1472 -192 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value PULSE(0 5 1 0.05 0 0.2 0 1)
SYMBOL res 1520 -208 M90
WINDOW 0 -7 47 VBottom 2
WINDOW 3 29 54 VTop 2
SYMATTR InstName RSense4
SYMATTR Value 1µ
SYMBOL voltage 1472 48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value PULSE(0 5 0.5 0.05 0 0.2 0 1)
SYMBOL res 1520 32 M90
WINDOW 0 -7 47 VBottom 2
WINDOW 3 29 54 VTop 2
SYMATTR InstName RSense5
SYMATTR Value 1µ
SYMBOL OpAmps\\LTC6079 -512 336 R0
SYMATTR InstName U5
SYMBOL res -960 208 R0
SYMATTR InstName R22
SYMATTR Value 30k
SYMBOL res -960 336 R0
SYMATTR InstName R35
SYMATTR Value 20k
SYMBOL res -752 208 R0
SYMATTR InstName LDR
SYMBOL res -752 368 R0
SYMATTR InstName R24
SYMATTR Value 16.25k
SYMBOL res 1520 -880 M90
WINDOW 0 -7 47 VBottom 2
WINDOW 3 29 54 VTop 2
SYMATTR InstName RSense1
SYMATTR Value 1µ
SYMBOL voltage 1472 -864 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V9
SYMATTR Value 5
SYMBOL diode 272 -400 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D10
SYMATTR Value 1N4148
SYMBOL diode 336 -976 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D16
SYMATTR Value 1N4148
SYMBOL diode 336 -896 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D15
SYMATTR Value 1N4148
SYMBOL diode 272 -272 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D7
SYMATTR Value 1N4148
SYMBOL diode 736 -304 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D8
SYMATTR Value 1N4148
SYMBOL diode 672 -304 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D9
SYMATTR Value 1N4148
TEXT -1384 -1448 Left 2 ;=============================\nREPLACE WITH YOUR DETAILS\nMC van der Berg, 22546448\n=============================
TEXT 1704 216 Left 2 !.inc irf9z24n.lib
TEXT 600 -1272 Left 2 ;Pilot LED logic
TEXT 512 -632 Left 2 ;SR Latch logic
TEXT -648 72 Left 2 ;LDR Comparator logic
TEXT -800 624 Left 2 ;Output:  LS = 5V when day;  LS = 0V when night
TEXT 144 -8 Left 2 ;Output: SR = 5V when set  was the last press
TEXT 280 -800 Left 2 ;Output: Pilot = 5V when SR = LS = 0V; Pilot = 0V when LS = 0V or SR = 0V
TEXT -1272 -176 Left 2 ;LEDs on when: PWM = 5V, SR = 5V, LS = 0V
TEXT -1264 -128 Left 2 ;Any other combination leads to the LEDs being off
TEXT 240 40 Left 2 ;SR = 0V when reset was the last press
TEXT -800 -1288 Left 2 ;LED Logic
TEXT 1456 216 Left 2 !.tran 0 5 0 0.01
RECTANGLE Normal 1984 272 1408 -1072 2
RECTANGLE Normal 1312 -736 96 -1312 2
RECTANGLE Normal 1072 96 112 -672 2
RECTANGLE Normal -48 672 -1008 32 2
RECTANGLE Normal -32 -48 -1392 -1312 2
